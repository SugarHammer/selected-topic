{"version":3,"sources":["../../../src/services/component/PopupService.ts"],"names":["injectable","TYPES","PopupService","popup","remove","mapsService","map","getMarkerContainer","addTo","scene","unAddPopup","addPopup","get","IMapService"],"mappings":";;;;;;AAAA,SAAoBA,UAApB,QAAsC,WAAtC;AACA,OAAO,kBAAP;AACA,SAASC,KAAT,QAAsB,aAAtB;IAKqBC,Y,WADpBF,UAAU,E;;;;;;;;;;;;;;;WAOT,qBAAmBG,KAAnB,EAAwC;AACtCA,MAAAA,KAAK,CAACC,MAAN;AACD;;;WAED,mBAAuB;AACrB,WAAKD,KAAL,CAAWC,MAAX;AACD;;;WAED,kBAAgBD,KAAhB,EAA+B;AAC7B,UAAI,KAAKA,KAAT,EAAgB;AACd,aAAKA,KAAL,CAAWC,MAAX;AACD;;AACD,UAAI,KAAKC,WAAL,CAAiBC,GAAjB,IAAwB,KAAKD,WAAL,CAAiBE,kBAAjB,EAA5B,EAAmE;AACjEJ,QAAAA,KAAK,CAACK,KAAN,CAAY,KAAKC,KAAjB;AACA,aAAKN,KAAL,GAAaA,KAAb;AACD,OAHD,MAGO;AACL,aAAKO,UAAL,GAAkBP,KAAlB;AACD;AACF;;;WACD,qBAAmB;AACjB,UAAI,KAAKO,UAAT,EAAqB;AACnB,aAAKC,QAAL,CAAc,KAAKD,UAAnB;AACA,aAAKA,UAAL,GAAkB,IAAlB;AACD;AACF;;;WAED,cAAYD,KAAZ,EAA8B;AAC5B,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKJ,WAAL,GAAmBI,KAAK,CAACG,GAAN,CAAuBX,KAAK,CAACY,WAA7B,CAAnB;AACD;;;;;SAnCkBX,Y","sourcesContent":["import { Container, injectable } from 'inversify';\nimport 'reflect-metadata';\nimport { TYPES } from '../../types';\nimport { IMapService } from '../map/IMapService';\nimport { IPopup, IPopupService } from './IPopupService';\n\n@injectable()\nexport default class PopupService implements IPopupService {\n  private scene: Container;\n  private popup: IPopup;\n  private mapsService: IMapService;\n  private unAddPopup: IPopup | null;\n\n  public removePopup(popup: IPopup): void {\n    popup.remove();\n  }\n\n  public destroy(): void {\n    this.popup.remove();\n  }\n\n  public addPopup(popup: IPopup) {\n    if (this.popup) {\n      this.popup.remove();\n    }\n    if (this.mapsService.map && this.mapsService.getMarkerContainer()) {\n      popup.addTo(this.scene);\n      this.popup = popup;\n    } else {\n      this.unAddPopup = popup;\n    }\n  }\n  public initPopup() {\n    if (this.unAddPopup) {\n      this.addPopup(this.unAddPopup);\n      this.unAddPopup = null;\n    }\n  }\n\n  public init(scene: Container) {\n    this.scene = scene;\n    this.mapsService = scene.get<IMapService>(TYPES.IMapService);\n  }\n}\n"],"file":"PopupService.js"}