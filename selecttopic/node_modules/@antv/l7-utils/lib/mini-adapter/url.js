"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.URL = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _atob = require("./atob");

var URL = function () {
  function URL(url) {
    var host = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    (0, _classCallCheck2.default)(this, URL);
    (0, _defineProperty2.default)(this, "href", void 0);

    if (url.indexOf('http://') == 0 || url.indexOf('https://') == 0) {
      this.href = url;
      return;
    }

    this.href = host + url;
  }

  (0, _createClass2.default)(URL, null, [{
    key: "createObjectURL",
    value: function createObjectURL(blob) {
      var buffer = blob.buffers[0];
      var type = blob.type;

      var base64 = _arrayBufferToBase64(buffer);

      var prefix = "data:".concat(type, ";base64, ");
      return prefix + base64;
    }
  }]);
  return URL;
}();

exports.URL = URL;

function _arrayBufferToBase64(buffer) {
  var binary = '';
  var bytes = new Uint8Array(buffer);
  var len = bytes.byteLength;

  for (var i = 0; i < len; i++) {
    binary += String.fromCharCode(bytes[i]);
  }

  return (0, _atob.btoa)(binary);
}
//# sourceMappingURL=url.js.map