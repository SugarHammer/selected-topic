{"version":3,"sources":["../../../src/mini-adapter/EventIniter/TouchEvent.ts"],"names":["TouchEvent","type","touches","targetTouches","changedTouches","target","currentTarget","Event","mapEvent","event","x","y","clientX","clientY","Object","keys","indexOf","pageX","pageY","eventHandlerFactory","rawEvent","Array","prototype","slice","call","timeStamp","forEach","e","$document","dispatchEvent","eventMapHandlerFactory","dispatchTouchStart","dispatchTouchMove","dispatchTouchEnd","dispatchMapCameraParams"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;;AACA;;AACA;;;;;;IAEMA,U;;;;;AAKJ,sBAAYC,IAAZ,EAAkB;AAAA;;AAAA;AAChB,8BAAMA,IAAN;AADgB;AAAA;AAAA;AAGhB,UAAKC,OAAL,GAAe,EAAf;AACA,UAAKC,aAAL,GAAqB,EAArB;AACA,UAAKC,cAAL,GAAsB,EAAtB;AAEA,UAAKC,MAAL,GAAc,0BAAd;AACA,UAAKC,aAAL,GAAqB,0BAArB;AARgB;AASjB;;;EAdsBC,a;;AAiBzB,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,aAAmDA,KAAK,IAAI,EAA5D;AAAA,oBAAQC,CAAR;AAAA,MAAQA,CAAR,uBAAY,CAAZ;AAAA,oBAAeC,CAAf;AAAA,MAAeA,CAAf,uBAAmB,CAAnB;AAAA,0BAAsBC,OAAtB;AAAA,MAAsBA,OAAtB,6BAAgC,CAAhC;AAAA,0BAAmCC,OAAnC;AAAA,MAAmCA,OAAnC,6BAA6C,CAA7C;;AAGA,MAAIC,MAAM,CAACC,IAAP,CAAYN,KAAZ,EAAmBO,OAAnB,CAA2B,GAA3B,MAAoC,CAAC,CAAzC,EAA4C;AAC1CP,IAAAA,KAAK,CAACQ,KAAN,GAAcR,KAAK,CAACG,OAAN,GAAgBF,CAA9B;AACAD,IAAAA,KAAK,CAACS,KAAN,GAAcT,KAAK,CAACI,OAAN,GAAgBF,CAA9B;AACD,GAHD,MAGO;AACLF,IAAAA,KAAK,CAACC,CAAN,GAAUE,OAAV;AACAH,IAAAA,KAAK,CAACE,CAAN,GAAUE,OAAV;AACD;AACF;;AAED,SAASM,mBAAT,CAA6BlB,IAA7B,EAAmC;AACjC,SAAO,UAACmB,QAAD,EAAc;AACnB,QAAMX,KAAK,GAAG,IAAIT,UAAJ,CAAeC,IAAf,CAAd;AAEAQ,IAAAA,KAAK,CAACL,cAAN,GAAuBgB,QAAQ,CAAChB,cAAhC;AACAK,IAAAA,KAAK,CAACP,OAAN,GAAgBkB,QAAQ,CAAClB,OAAzB;AACAO,IAAAA,KAAK,CAACN,aAAN,GAAsBkB,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BJ,QAAQ,CAAClB,OAApC,CAAtB;AACAO,IAAAA,KAAK,CAACgB,SAAN,GAAkBL,QAAQ,CAACK,SAA3B;AAEAhB,IAAAA,KAAK,CAACL,cAAN,CAAqBsB,OAArB,CAA6B,UAACC,CAAD;AAAA,aAAOnB,QAAQ,CAACmB,CAAD,CAAf;AAAA,KAA7B;AACAlB,IAAAA,KAAK,CAACP,OAAN,CAAcwB,OAAd,CAAsB,UAACC,CAAD;AAAA,aAAOnB,QAAQ,CAACmB,CAAD,CAAf;AAAA,KAAtB;AACAlB,IAAAA,KAAK,CAACN,aAAN,CAAoBuB,OAApB,CAA4B,UAACC,CAAD;AAAA,aAAOnB,QAAQ,CAACmB,CAAD,CAAf;AAAA,KAA5B;;AAEAC,wBAAUC,aAAV,CAAwBpB,KAAxB;AACD,GAbD;AAcD;;AAED,SAASqB,sBAAT,CAAgC7B,IAAhC,EAAsC;AACpC,SAAO,UAAUmB,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACnB,IAAT,GAAgBA,IAAhB;;AACA2B,wBAAUC,aAAV,CAAwBT,QAAxB;AACD,GAHD;AAID;;AAED,IAAMW,kBAAkB,GAAGZ,mBAAmB,CAAC,YAAD,CAA9C;;AACA,IAAMa,iBAAiB,GAAGb,mBAAmB,CAAC,WAAD,CAA7C;;AACA,IAAMc,gBAAgB,GAAGd,mBAAmB,CAAC,UAAD,CAA5C;;AACA,IAAMe,uBAAuB,GAAGJ,sBAAsB,CAAC,gBAAD,CAAtD","sourcesContent":["// @ts-nocheck\n// tslint:disable\nimport { $document } from '../document';\nimport { Event } from '../Event';\nimport { getCanvas } from '../register';\n\nclass TouchEvent extends Event {\n  public touches: any[];\n  public targetTouches: any[];\n  public changedTouches: any[];\n\n  constructor(type) {\n    super(type);\n\n    this.touches = [];\n    this.targetTouches = [];\n    this.changedTouches = [];\n\n    this.target = getCanvas();\n    this.currentTarget = getCanvas();\n  }\n}\n\nfunction mapEvent(event) {\n  const { x = 0, y = 0, clientX = 0, clientY = 0 } = event || {};\n  // 小程序不支持Object.hasOwnProperty\n  // (抹平不同的view事件)[https://docs.alipay.com/mini/framework/event-object]\n  if (Object.keys(event).indexOf('x') !== -1) {\n    event.pageX = event.clientX = x;\n    event.pageY = event.clientY = y;\n  } else {\n    event.x = clientX;\n    event.y = clientY;\n  }\n}\n\nfunction eventHandlerFactory(type) {\n  return (rawEvent) => {\n    const event = new TouchEvent(type);\n\n    event.changedTouches = rawEvent.changedTouches;\n    event.touches = rawEvent.touches;\n    event.targetTouches = Array.prototype.slice.call(rawEvent.touches);\n    event.timeStamp = rawEvent.timeStamp;\n\n    event.changedTouches.forEach((e) => mapEvent(e));\n    event.touches.forEach((e) => mapEvent(e));\n    event.targetTouches.forEach((e) => mapEvent(e));\n\n    $document.dispatchEvent(event);\n  };\n}\n\nfunction eventMapHandlerFactory(type) {\n  return function (rawEvent) {\n    rawEvent.type = type;\n    $document.dispatchEvent(rawEvent);\n  };\n}\n\nconst dispatchTouchStart = eventHandlerFactory('touchstart');\nconst dispatchTouchMove = eventHandlerFactory('touchmove');\nconst dispatchTouchEnd = eventHandlerFactory('touchend');\nconst dispatchMapCameraParams = eventMapHandlerFactory('mapCameaParams');\nexport { dispatchTouchStart, dispatchTouchMove, dispatchTouchEnd, dispatchMapCameraParams };\n"],"file":"TouchEvent.js"}