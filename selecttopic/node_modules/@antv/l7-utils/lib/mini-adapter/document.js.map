{"version":3,"sources":["../../src/mini-adapter/document.ts"],"names":["Body","type","listener","options","event","HTMLElement","DocumentElement","events","$document","readyState","visibilityState","hidden","fullscreen","scripts","style","location","$location","ontouchstart","ontouchmove","ontouchend","onvisibilitychange","parentNode","parentElement","head","body","documentElement","createElement","tagName","toLowerCase","my","createOffscreenCanvas","Image","HTMLVideoElement","createElementNS","nameSpace","createTextNode","text","getElementById","id","getElementsByTagName","getElementsByTagNameNS","getElementsByName","querySelector","query","querySelectorAll","addEventListener","push","removeEventListener","listeners","length","i","splice","dispatchEvent","target","createEvent","Event"],"mappings":";;;;;;;;;;;;;;;;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;;;IAEMA,I;;;;;AACJ,kBAAc;AAAA;AAAA,6BAGN,MAHM,EAGE,CAHF;AAIb;;;;WAED,0BAAwBC,IAAxB,EAA8BC,QAA9B,EAAsD;AAAA,UAAdC,OAAc,uEAAJ,EAAI;AAErD;;;WAED,6BAA2BF,IAA3B,EAAiCC,QAAjC,EAA2CC,OAA3C,EAAoD,CAEnD;;;WAED,uBAAqBC,KAArB,EAAmC,CAElC;;;EAjBgBC,yB;;IAoBbC,e;;;;;AACJ,6BAAc;AAAA;AAAA,8BACN,MADM,EACE,CADF;AAEb;;;;WAED,0BAAwBL,IAAxB,EAA8BC,QAA9B,EAAsD;AAAA,UAAdC,OAAc,uEAAJ,EAAI;AAErD;;;WAED,6BAA2BF,IAA3B,EAAiCC,QAAjC,EAA2C,CAE1C;;;WAED,uBAAqBE,KAArB,EAAmC,CAElC;;;EAf2BC,yB;;AAkB9B,IAAME,MAAM,GAAG,EAAf;AAEO,IAAMC,SAAS,GAAG;AACvBC,EAAAA,UAAU,EAAE,UADW;AAEvBC,EAAAA,eAAe,EAAE,SAFM;AAGvBC,EAAAA,MAAM,EAAE,KAHe;AAIvBC,EAAAA,UAAU,EAAE,IAJW;AAMvBC,EAAAA,OAAO,EAAE,EANc;AAOvBC,EAAAA,KAAK,EAAE,EAPgB;AASvBC,EAAAA,QAAQ,EAAEC,mBATa;AAWvBC,EAAAA,YAAY,EAAE,IAXS;AAYvBC,EAAAA,WAAW,EAAE,IAZU;AAavBC,EAAAA,UAAU,EAAE,IAbW;AAcvBC,EAAAA,kBAAkB,EAAE,IAdG;AAgBvBC,EAAAA,UAAU,EAAE,IAhBW;AAiBvBC,EAAAA,aAAa,EAAE,IAjBQ;AAkBvBC,EAAAA,IAAI,EAAE,IAlBiB;AAmBvBC,EAAAA,IAAI,EAAE,IAnBiB;AAoBvBC,EAAAA,eAAe,EAAE;AACfX,IAAAA,KAAK,EAAE;AADQ,GApBM;AAuBvBY,EAAAA,aAvBuB,yBAuBTC,OAvBS,EAuBA;AACrBA,IAAAA,OAAO,GAAGA,OAAO,CAACC,WAAR,EAAV;;AACA,QAAID,OAAO,KAAK,QAAhB,EAA0B;AAGxB,aAAOE,EAAE,CAACC,qBAAH,CAAyB,IAAzB,EAA+B,GAA/B,EAAoC,IAApC,CAAP;AACD,KAJD,MAIO,IAAIH,OAAO,KAAK,KAAhB,EAAuB;AAC5B,aAAO,IAAII,YAAJ,EAAP;AACD,KAFM,MAEA,IAAIJ,OAAO,KAAK,OAAhB,EAAyB;AAC9B,aAAO,IAAIK,kCAAJ,EAAP;AACD;;AAED,WAAO,IAAI3B,yBAAJ,CAAgBsB,OAAhB,CAAP;AACD,GApCsB;AAsCvBM,EAAAA,eAtCuB,2BAsCPC,SAtCO,EAsCIP,OAtCJ,EAsCa;AAClC,WAAO,KAAKD,aAAL,CAAmBC,OAAnB,CAAP;AACD,GAxCsB;AA0CvBQ,EAAAA,cA1CuB,0BA0CRC,IA1CQ,EA0CF;AAEnB,WAAOA,IAAP;AACD,GA7CsB;AA+CvBC,EAAAA,cA/CuB,0BA+CRC,EA/CQ,EA+CJ;AACjB,WAAO,IAAP;AACD,GAjDsB;AAmDvBC,EAAAA,oBAnDuB,gCAmDFZ,OAnDE,EAmDO;AAC5BA,IAAAA,OAAO,GAAGA,OAAO,CAACC,WAAR,EAAV;AACA,WAAO,EAAP;AACD,GAtDsB;AAwDvBY,EAAAA,sBAxDuB,kCAwDAN,SAxDA,EAwDWP,OAxDX,EAwDoB;AACzC,WAAO,KAAKY,oBAAL,CAA0BZ,OAA1B,CAAP;AACD,GA1DsB;AA4DvBc,EAAAA,iBA5DuB,6BA4DLd,OA5DK,EA4DI;AACzB,WAAO,EAAP;AACD,GA9DsB;AAgEvBe,EAAAA,aAhEuB,yBAgETC,KAhES,EAgEF;AACnB,WAAO,IAAP;AACD,GAlEsB;AAoEvBC,EAAAA,gBApEuB,4BAoEND,KApEM,EAoEC;AACtB,WAAO,EAAP;AACD,GAtEsB;AAwEvBE,EAAAA,gBAxEuB,4BAwEN5C,IAxEM,EAwEAC,QAxEA,EAwEUC,OAxEV,EAwEmB;AACxC,QAAI,CAACI,MAAM,CAACN,IAAD,CAAX,EAAmB;AACjBM,MAAAA,MAAM,CAACN,IAAD,CAAN,GAAe,EAAf;AACD;;AACDM,IAAAA,MAAM,CAACN,IAAD,CAAN,CAAa6C,IAAb,CAAkB5C,QAAlB;AACD,GA7EsB;AA+EvB6C,EAAAA,mBA/EuB,+BA+EH9C,IA/EG,EA+EGC,QA/EH,EA+Ea;AAClC,QAAM8C,SAAS,GAAGzC,MAAM,CAACN,IAAD,CAAxB;;AAEA,QAAI+C,SAAS,IAAIA,SAAS,CAACC,MAAV,GAAmB,CAApC,EAAuC;AACrC,WAAK,IAAIC,CAAC,GAAGF,SAAS,CAACC,MAAvB,EAA+BC,CAAC,EAAhC,EAAoCA,CAAC,GAAG,CAAxC,EAA2C;AACzC,YAAIF,SAAS,CAACE,CAAD,CAAT,KAAiBhD,QAArB,EAA+B;AAC7B8C,UAAAA,SAAS,CAACG,MAAV,CAAiBD,CAAjB,EAAoB,CAApB;AACA;AACD;AACF;AACF;AACF,GA1FsB;AA4FvBE,EAAAA,aA5FuB,yBA4FThD,KA5FS,EA4FK;AAC1B,QAAMH,IAAI,GAAGG,KAAK,CAACH,IAAnB;AACA,QAAM+C,SAAS,GAAGzC,MAAM,CAACN,IAAD,CAAxB;;AAEA,QAAI+C,SAAJ,EAAe;AACb,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAAS,CAACC,MAA9B,EAAsCC,CAAC,EAAvC,EAA2C;AACzCF,QAAAA,SAAS,CAACE,CAAD,CAAT,CAAa9C,KAAb;AACD;AACF;;AAED,QAAIA,KAAK,CAACiD,MAAN,IAAgB,OAAOjD,KAAK,CAACiD,MAAN,CAAa,OAAOpD,IAApB,CAAP,KAAqC,UAAzD,EAAqE;AACnEG,MAAAA,KAAK,CAACiD,MAAN,CAAa,OAAOpD,IAApB,EAA0BG,KAA1B;AACD;AACF,GAzGsB;AA0GvBkD,EAAAA,WA1GuB,uBA0GXrD,IA1GW,EA0GG;AACxB,WAAO,IAAIsD,YAAJ,CAAUtD,IAAV,CAAP;AACD;AA5GsB,CAAlB;;AA+GPO,SAAS,CAACiB,eAAV,GAA4B,IAAInB,eAAJ,EAA5B;AACAE,SAAS,CAACe,IAAV,GAAiB,IAAIlB,yBAAJ,CAAgB,MAAhB,CAAjB;AACAG,SAAS,CAACgB,IAAV,GAAiB,IAAIxB,IAAJ,EAAjB","sourcesContent":["// @ts-nocheck\n// tslint:disable\nimport { Event } from './Event';\nimport { HTMLElement } from './HTMLElement';\nimport { HTMLVideoElement } from './HTMLVideoElement';\nimport { Image } from './Image';\nimport { $location } from './location';\n\nclass Body extends HTMLElement {\n  constructor() {\n    // 为了性能, 此处不按照标准的DOM层级关系设计\n    // 将 body 设置为 0级, parent元素为null\n    super('body', 0);\n  }\n\n  public addEventListener(type, listener, options = {}) {\n    // document.addEventListener(type, listener, options);\n  }\n\n  public removeEventListener(type, listener, options) {\n    // document.removeEventListener(type, listener);\n  }\n\n  public dispatchEvent(event: Event) {\n    // document.dispatchEvent(event);\n  }\n}\n\nclass DocumentElement extends HTMLElement {\n  constructor() {\n    super('html', 0);\n  }\n\n  public addEventListener(type, listener, options = {}) {\n    // document.addEventListener(type, listener, options);\n  }\n\n  public removeEventListener(type, listener) {\n    // document.removeEventListener(type, listener);\n  }\n\n  public dispatchEvent(event: Event) {\n    // document.dispatchEvent(event);\n  }\n}\n\nconst events = {};\n\nexport const $document = {\n  readyState: 'complete',\n  visibilityState: 'visible', // 'visible' , 'hidden'\n  hidden: false,\n  fullscreen: true,\n\n  scripts: [],\n  style: {},\n\n  location: $location,\n\n  ontouchstart: null,\n  ontouchmove: null,\n  ontouchend: null,\n  onvisibilitychange: null,\n\n  parentNode: null,\n  parentElement: null,\n  head: null,\n  body: null,\n  documentElement: {\n    style: [] as any[] ,\n  },\n  createElement(tagName) {\n    tagName = tagName.toLowerCase();\n    if (tagName === 'canvas') {\n      // return getCanvas();\n      // @ts-ignore\n      return my.createOffscreenCanvas(1024, 128, '2d')\n    } else if (tagName === 'img') {\n      return new Image();\n    } else if (tagName === 'video') {\n      return new HTMLVideoElement();\n    }\n\n    return new HTMLElement(tagName);\n  },\n\n  createElementNS(nameSpace, tagName) {\n    return this.createElement(tagName);\n  },\n\n  createTextNode(text) {\n    // TODO: Do we need the TextNode Class ???\n    return text;\n  },\n\n  getElementById(id) {\n    return null;\n  },\n\n  getElementsByTagName(tagName) {\n    tagName = tagName.toLowerCase();\n    return [];\n  },\n\n  getElementsByTagNameNS(nameSpace, tagName) {\n    return this.getElementsByTagName(tagName);\n  },\n\n  getElementsByName(tagName) {\n    return [];\n  },\n\n  querySelector(query) {\n    return null;\n  },\n\n  querySelectorAll(query) {\n    return [];\n  },\n\n  addEventListener(type, listener, options) {\n    if (!events[type]) {\n      events[type] = [];\n    }\n    events[type].push(listener);\n  },\n\n  removeEventListener(type, listener) {\n    const listeners = events[type];\n\n    if (listeners && listeners.length > 0) {\n      for (let i = listeners.length; i--; i > 0) {\n        if (listeners[i] === listener) {\n          listeners.splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n\n  dispatchEvent(event: Event) {\n    const type = event.type;\n    const listeners = events[type];\n\n    if (listeners) {\n      for (let i = 0; i < listeners.length; i++) {\n        listeners[i](event);\n      }\n    }\n\n    if (event.target && typeof event.target['on' + type] === 'function') {\n      event.target['on' + type](event);\n    }\n  },\n  createEvent(type: string) {\n    return new Event(type);\n  },\n};\n\n$document.documentElement = new DocumentElement();\n$document.head = new HTMLElement('head');\n$document.body = new Body();\n"],"file":"document.js"}