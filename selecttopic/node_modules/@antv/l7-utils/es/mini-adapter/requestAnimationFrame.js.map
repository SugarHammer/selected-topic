{"version":3,"sources":["../../src/mini-adapter/requestAnimationFrame.ts"],"names":["getCanvas","lastTime","id","hack","cb","now","Date","nextTime","Math","max","setTimeout","requestAnimationFrame","canvas","cancelAnimationFrame","clearTimeout"],"mappings":"AAEA,SAASA,SAAT,QAA0B,YAA1B;AAEA,IAAIC,QAAa,GAAG,CAApB;AACA,IAAIC,EAAO,GAAG,CAAd;;AAEA,SAASC,IAAT,CAAcC,EAAd,EAAkB;AAChB,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAZ;AAEA,MAAME,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAASR,QAAQ,GAAG,EAApB,EAAwBI,GAAxB,CAAjB;AAEAH,EAAAA,EAAE,GAAGQ,UAAU,CAAC,YAAM;AACpBN,IAAAA,EAAE,CAAEH,QAAQ,GAAGM,QAAb,CAAF;AACD,GAFc,EAEZA,QAAQ,GAAGF,GAFC,CAAf;AAIA,SAAOH,EAAP;AACD;;AAED,SAASS,qBAAT,CAA+BP,EAA/B,EAAmC;AACjC,MAAMQ,MAAM,GAAGZ,SAAS,EAAxB;;AACA,MAAIY,MAAM,CAACD,qBAAX,EAAkC;AAChC,WAAOC,MAAM,CAACD,qBAAP,CAA6BP,EAA7B,CAAP;AACD,GAFD,MAEO;AACL,WAAOD,IAAI,CAACC,EAAD,CAAX;AACD;AACF;;AAED,SAASS,oBAAT,CAA8BX,EAA9B,EAAkC;AAChC,MAAMU,MAAM,GAAGZ,SAAS,EAAxB;;AACA,MAAIY,MAAM,CAACC,oBAAX,EAAiC;AAC/B,WAAOD,MAAM,CAACC,oBAAP,CAA4BX,EAA5B,CAAP;AACD,GAFD,MAEO;AACL,WAAOY,YAAY,CAACZ,EAAD,CAAnB;AACD;AACF;;AAED,SAASS,qBAAT,EAAgCE,oBAAhC","sourcesContent":["// @ts-nocheck\n// tslint:disable\nimport { getCanvas } from './register';\n\nlet lastTime: any = 0;\nlet id: any = 0;\n\nfunction hack(cb) {\n  const now = Date.now();\n\n  const nextTime = Math.max(lastTime + 23, now);\n\n  id = setTimeout(() => {\n    cb((lastTime = nextTime));\n  }, nextTime - now);\n\n  return id;\n}\n\nfunction requestAnimationFrame(cb) {\n  const canvas = getCanvas();\n  if (canvas.requestAnimationFrame) {\n    return canvas.requestAnimationFrame(cb);\n  } else {\n    return hack(cb);\n  }\n}\n\nfunction cancelAnimationFrame(id) {\n  const canvas = getCanvas();\n  if (canvas.cancelAnimationFrame) {\n    return canvas.cancelAnimationFrame(id);\n  } else {\n    return clearTimeout(id);\n  }\n}\n\nexport { requestAnimationFrame, cancelAnimationFrame };\n"],"file":"requestAnimationFrame.js"}